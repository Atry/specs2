<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Structure</title>
    <link href="./css/opensans-fonts.css"                          type="text/css" rel="stylesheet" />
    <link href="./css/bootstrap.min.css"                           type="text/css" rel="stylesheet" />
    <link href="./css/font-awesome.min.css"                        type="text/css" rel="stylesheet" />
    <link href="./css/prettify.css"                                type="text/css" rel="stylesheet" />
    <link href="./css/tabber.css"                                  type="text/css" rel="stylesheet" />
    <link href="./css/tipuesearch.css"                             type="text/css" rel="stylesheet" />
    <link href="./css/specs2.css"                                  type="text/css" rel="stylesheet" />
    <link href="./css/specs2-user.css"                             type="text/css" rel="stylesheet" />

    <script src="./javascript/jquery.js"                           type="text/javascript"></script>
    <script src="./javascript/jquery.jstree.js"                    type="text/javascript"></script>
    <script src="./javascript/tabber.js"                           type="text/javascript"></script>
    <script src="./javascript/tabber_start.js"                     type="text/javascript"></script>
    <script src="./javascript/prettify.js"                         type="text/javascript"></script>
    <script src="./javascript/specs2.js"                           type="text/javascript"></script>
    <script src="./javascript/specs2-user.js"                      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_set.js"      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_contents.js" type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch.min.js"      type="text/javascript"></script>

</head>
<body onload="prettyPrint()">

<div class="container">

<div class="col-md-2 sidebar-outer">
<div class="col-md-2 fixed">

<!-- search box -->
<div class="search-box">
  <form action="search.html">
    <input type="text" name="q" id="tipue_search_input" autocomplete="off" required>
  </form>
</div>

<!-- table of contents -->
<div id="tree"><ul>
                <li id="org-specs2-guide-consoleoutput"><a href="org.specs2.guide.ConsoleOutput.html" title="Console output">Console output</a>
      <ul><ul><li><a href="org.specs2.guide.ConsoleOutput.html#show-only" title="Show only">Show only</a>
          
        </li><li><a href="org.specs2.guide.ConsoleOutput.html#stacktracefilter" title="StackTraceFilter">StackTraceFilter</a>
          
        </li><li><a href="org.specs2.guide.ConsoleOutput.html#diffs" title="Diffs">Diffs</a>
          
        </li><li><a href="org.specs2.guide.ConsoleOutput.html#colors" title="Colors">Colors</a>
          
        </li></ul></ul>
      <ul>
                    
                  </ul>
    </li>
              </ul></div><script>$(function () { $('#tree').jstree({'core':{'initially_open':['org-specs2-guide-structure'], 'animation':200}, 'themes' : {'theme': 'default','url': './css/themes/default/style.css'}, 'plugins':['themes', 'html_data']}); });</script>

</div>
</div>


<div class="col-md-10">
<h1>Structure</h1>
<div id="tipue_search_content"></div>

<h3 id="styles">Styles</h3>
<p>In a Specification you generally want to include 2 things:</p>
<ul>
<li>some informal text describing what the system/application/function should do</li>
<li>some Scala code specifying exactly inputs and expected outputs</li>
</ul>
<p>With <s2>specs2</s2> you have 2 main ways to do this:</p>
<ul>
<li><p>you can create an <em>“Acceptance”</em> specification where all the informal text is written in one place and the code is written somewhere else. The name “acceptance” comes from the fact that it might be easier for a non-developer to just read some text to validate your specification</p></li>
<li><p>you can create a <em>“Unit”</em> specification where the code is interleaved with the text. The name “unit” comes from the fact that Unit specifications have a structure which is close to unit tests in “classical” frameworks such as JUnit</p></li>
</ul>
<p>Both ways of writing specifications have advantages and drawbacks:</p>
<ul>
<li><p>Acceptance specifications are easier to read as a narrative but require navigation between the text and the code. You also need to define an <code class="prettyprint">is</code> method holding the body of the specification</p></li>
<li><p>Unit specifications are easier to navigate but the text tends to be lost in a sea of code</p></li>
</ul>
<h3 id="acceptance-specification">Acceptance specification</h3>
<p>An acceptance specification extends <code class="prettyprint">org.specs2.Specification</code> and defines the <code class="prettyprint">is</code> method. You can implement this method with an interpolated <strong><code class="prettyprint">s2</code></strong> string:</p>
<pre><code class="prettyprint">class MySpecification extends org.specs2.Specification { def is = s2&quot;&quot;&quot;

 this is my specification
   where example 1 must be true           $e1
   where example 2 must be true           $e2
                                          &quot;&quot;&quot;

  def e1 = 1 must_== 1
  def e2 = 2 must_== 2
}</code></pre>
<p>The <code class="prettyprint">s2</code> string contains the text of your specification as well as some references to methods (<code class="prettyprint">e1</code> and <code class="prettyprint">e2</code>) defining <em><code class="prettyprint">Results</code></em>. When the Specification is executed, the <code class="prettyprint">s2</code> string is analysed and 2 <code class="prettyprint">Examples</code> are created then executed:</p>
<ul>
<li>one <code class="prettyprint">Example</code> with the description “where example 1 must be true” and the code <code class="prettyprint">1 must_== 1</code></li>
<li>another <code class="prettyprint">Example</code> with the description “where example 2 must be true” and the code <code class="prettyprint">2 must_== 2</code></li>
</ul>
<p>All the rest, <code class="prettyprint">&quot;this is my specification&quot;</code>, is parsed as <code class="prettyprint">Text</code> and is not executed.</p>
<h3 id="unit-specification">Unit specification</h3>
<p>A unit specification extends <code class="prettyprint">org.specs2.mutable.Specification</code> and uses the <code class="prettyprint">&gt;&gt;</code> operator to create “blocks” containing <code class="prettyprint">Texts</code> and <code class="prettyprint">Examples</code>:</p>
<pre><code class="prettyprint">class MySpecification extends org.specs2.mutable.Specification {
  &quot;this is my specification&quot; &gt;&gt; {
    &quot;where example 1 must be true&quot; &gt;&gt; {
      1 must_== 1
    }
    &quot;where example 2 must be true&quot; &gt;&gt; {
      2 must_== 2
    }
  }
}</code></pre>
<p>This specification creates one piece of <code class="prettyprint">Text</code> and 2 <code class="prettyprint">Examples</code> as before but:</p>
<ul>
<li>there is no need to define an <code class="prettyprint">is</code> method (this means that a mutable variable is used to collect the <code class="prettyprint">Texts</code> and <code class="prettyprint">Examples</code> hence the <code class="prettyprint">mutable</code> package name)</li>
<li>the code is close to each piece of text it specifies</li>
</ul>
<p>However once a specification is created with all its <code class="prettyprint">Texts</code> and <code class="prettyprint">Examples</code>, the execution will be the same, whether it is an Acceptance one or a Unit one.</p>
<p>The <code class="prettyprint">&gt;&gt;</code> blocks can be nested and this allows you to structure your specification so that the outermost blocks describe a general context while the innermost ones describe more specific contexts. A similar effect can be achieved by simply indenting text in an acceptance specification.</p>
<h3 id="expectations">Expectations</h3>
<p>There is another major difference between the acceptance specifications and unit specifications. The first style encourages you to write <a href="http://bit.ly/one_assertion_per_test">one expectation per example</a> while the second allows to use several. One expectation per example is useful because when a specification fails, you know immediately what is wrong. However it is sometimes expensive to setup data for an example. In that case, having several expectations sharing the same setup might be preferable.</p>
<p>The good news is that for each of the 2 main styles, acceptance and unit, you can choose exactly which “Expectation mode” you prefer if the default mode is not convenient.</p>
<h4 id="functional-expectations">Functional expectations</h4>
<p>In an acceptance specification, by default, the <code class="prettyprint">Result</code> of an <code class="prettyprint">Example</code> is always given by the last statement of its body. For instance, this example will never fail because the first expectation is “lost”:</p>
<pre><code class="prettyprint">// this will never fail!
s2&quot;&quot;&quot;
  my example on strings $e1
&quot;&quot;&quot;
  def e1 = {
    // because this expectation will not be returned,...
    &quot;hello&quot; must have size (10000)
    &quot;hello&quot; must startWith(&quot;hell&quot;)
  }</code></pre>
<p>If you want to get both expectations you will need to use <code class="prettyprint">and</code> between them:</p>
<pre><code class="prettyprint">s2&quot;&quot;&quot;
  my example on strings $e1
&quot;&quot;&quot;
  def e1 = (&quot;hello&quot; must have size (10000)) and
           (&quot;hello&quot; must startWith(&quot;hell&quot;))</code></pre>
<p>This is a bit tedious and not very pleasing to read so you can see why this mode encourages one expectation per example only! If you want to declare several expectations per example, you can mix-in the <code class="prettyprint">org.specs2.execute.ThrownExpectations</code> trait to the specification.</p>
<h4 id="thrown-expectations">Thrown expectations</h4>
<p>With a unit specification you get “thrown expectations” by default. When an expectation fails, it throws an exception and the rest of the example is not executed:</p>
<pre><code class="prettyprint">class MySpecification extends org.specs2.mutable.Specification {
  &quot;This is my example&quot; &gt;&gt; {
    1 must_== 2 // this fails
    1 must_== 1 // this is not executed
  }
}</code></pre>
<p>It is also possible to use the “functional” expectation mode with a unit specification by mixing in the <code class="prettyprint">org.specs2.execute.NoThrownExpectations</code> trait.</p>
<h3 id="now-learn-how-to" class="ribbon both-ribbon">Now learn how to…</h3>
<div class="ribbon-content">
<ul>
<li>use <link class="ok"> <a href="org.specs2.guide.Matchers.html" tooltip="" class="ok">matchers</a></link> to specify the body of your examples</li>
<li>set up <link class="ok"> <a href="org.specs2.guide.Contexts.html" tooltip="" class="ok">contexts</a></link> for the examples</li>
<li>control the <link class="ok"> <a href="org.specs2.guide.Execution.html" tooltip="" class="ok">execution</a></link> of a specification</li>
<li><link class="ok"> <a href="org.specs2.guide.Runners.html" tooltip="" class="ok">run</a></link> a specification</li>
</ul>
</div>
<h3 id="and-if-you-want-to-know-more" class="ribbon both-ribbon">And if you want to know more</h3>
<div class="ribbon-content">
<ul>
<li><link class="ok"> <a href="org.specs2.guide.SkipExamples.html" tooltip="" class="ok">skip</a></link> examples</li>
<li>collect <link class="ok"> <a href="org.specs2.guide.GetAllExpectations.html" tooltip="" class="ok"><em>all</em> expectations</a></link></li>
<li>mark examples as <link class="ok"> <a href="org.specs2.guide.PendingUntilFixedExamples.html" tooltip="" class="ok">pending until they are fixed</a></link></li>
<li>add <link class="ok"> <a href="org.specs2.guide.ReferenceOtherSpecifications.html" tooltip="" class="ok">references to other specifications</a></link></li>
<li>create example descriptions spanning <link class="ok"> <a href="org.specs2.guide.MultilineDescriptions.html" tooltip="" class="ok">several lines</a></link></li>
<li>add <link class="ok"> <a href="org.specs2.guide.SpecificationFormatting.html" tooltip="" class="ok">new lines and tabs</a></link> in unit specifications</li>
<li>create a trait which will <link class="ok"> <a href="org.specs2.guide.SpecificationTemplate.html" tooltip="" class="ok">decorate or transform other specifications</a></link> when mixed-in</li>
<li>create <link class="ok"> <a href="org.specs2.guide.AutoExamples.html" tooltip="" class="ok"><em>auto-examples</em></a></link> where the code <em>is</em> the description of the <code class="prettyprint">Example</code></li>
<li>integrate <link class="ok"> <a href="org.specs2.guide.CaptureSnippets.html" tooltip="" class="ok">snippets of code</a></link> to your specification</li>
<li>use <link class="ok"> <a href="org.specs2.guide.NamedExamples.html" tooltip="" class="ok">named examples</a></link> in acceptance specifications to get default example names</li>
<li>use <link class="ok"> <a href="org.specs2.guide.AutoNumberedExamples.html" tooltip="" class="ok">scripts and auto-numbered examples</a></link> to completely separate the specification text from the code</li>
<li>use <link class="ok"> <a href="org.specs2.guide.LightweightSpecs.html" tooltip="" class="ok">lightweight specifications</a></link> to reduce the number of implicits in scope</li>
<li>use the <link class="ok"> <a href="org.specs2.guide.GivenWhenThenStyle.html" tooltip="" class="ok">Given/When/Then style</a></link> to structure specifications</li>
<li>use <link class="ok"> <a href="org.specs2.guide.UseForms.html" tooltip="" class="ok">Forms</a></link> to create executable HTML tables in your specification</li>
<li>use the <link class="ok"> <a href="org.specs2.guide.UseCommandLineArguments.html" tooltip="" class="ok">command line arguments</a></link> to define the body of an example</li>
<li>add <link class="ok"> <a href="org.specs2.guide.DebugStatements.html" tooltip="" class="ok">debug statements</a></link></li>
<li>print <link class="ok"> <a href="org.specs2.guide.PrintExecutionData.html" tooltip="" class="ok">execution data</a></link></li>
<li>extend the specification by creating examples <link class="ok"> <a href="org.specs2.guide.CreateOnlineSpecifications.html" tooltip="" class="ok"><em>while it is executing</em></a></link></li>
</ul>
</div>
</div>

<script>
$(document).ready(function() {
  $('#tipue_search_input').tipuesearch({
    'show': 6
  });
});
</script>
</div>

</body>
</html>