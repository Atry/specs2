<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Auto-examples</title>
    <link href="./css/opensans-fonts.css"                          type="text/css" rel="stylesheet" />
    <link href="./css/bootstrap.min.css"                           type="text/css" rel="stylesheet" />
    <link href="./css/font-awesome.min.css"                        type="text/css" rel="stylesheet" />
    <link href="./css/prettify.css"                                type="text/css" rel="stylesheet" />
    <link href="./css/tabber.css"                                  type="text/css" rel="stylesheet" />
    <link href="./css/tipuesearch.css"                             type="text/css" rel="stylesheet" />
    <link href="./css/specs2.css"                                  type="text/css" rel="stylesheet" />
    <link href="./css/specs2-user.css"                             type="text/css" rel="stylesheet" />

    <script src="./javascript/jquery.js"                           type="text/javascript"></script>
    <script src="./javascript/jquery.jstree.js"                    type="text/javascript"></script>
    <script src="./javascript/tabber.js"                           type="text/javascript"></script>
    <script src="./javascript/tabber_start.js"                     type="text/javascript"></script>
    <script src="./javascript/prettify.js"                         type="text/javascript"></script>
    <script src="./javascript/specs2.js"                           type="text/javascript"></script>
    <script src="./javascript/specs2-user.js"                      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_set.js"      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_contents.js" type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch.min.js"      type="text/javascript"></script>

</head>
<body onload="prettyPrint()">

<div class="container">

<div class="col-md-2 sidebar-outer">
<div class="col-md-2 fixed">

<!-- search box -->
<div class="search-box">
  <form action="search.html">
    <input type="text" name="q" id="tipue_search_input" autocomplete="off" required>
  </form>
</div>

<!-- table of contents -->
<div id="tree"><ul>
                <li id="org-specs2-guide-consoleoutput"><a href="org.specs2.guide.ConsoleOutput.html" title="Console output">Console output</a>
      <ul><ul><li><a href="org.specs2.guide.ConsoleOutput.html#show-only" title="Show only">Show only</a>
          
        </li><li><a href="org.specs2.guide.ConsoleOutput.html#stacktracefilter" title="StackTraceFilter">StackTraceFilter</a>
          
        </li><li><a href="org.specs2.guide.ConsoleOutput.html#diffs" title="Diffs">Diffs</a>
          
        </li><li><a href="org.specs2.guide.ConsoleOutput.html#colors" title="Colors">Colors</a>
          
        </li></ul></ul>
      <ul>
                    
                  </ul>
    </li>
              </ul></div><script>$(function () { $('#tree').jstree({'core':{'initially_open':['org-specs2-guide-autoexamples'], 'animation':200}, 'themes' : {'theme': 'default','url': './css/themes/default/style.css'}, 'plugins':['themes', 'html_data']}); });</script>

</div>
</div>


<div class="col-md-10">
<h1>Auto-examples</h1>
<div id="tipue_search_content"></div>

<p>When you want to specify an API, most of your examples are self-describing:</p>
<pre><code class="prettyprint">class SeqSpecification extends mutable.Specification {
  &quot;updateLast modifies the last element of a Seq&quot;.p
   &quot;when the collection has 1 element&quot;  &gt;&gt; { Seq(1).updateLast(_ + 1)     must_== Seq(2) }
   &quot;when the collection has 2 elements&quot; &gt;&gt; { Seq(1, 2).updateLast(_ + 1)  must_== Seq(1, 3) }
   &quot;when the collection is empty&quot;       &gt;&gt; { Seq[Int]().updateLast(_ + 1) must_== Seq[Int]() }
}</code></pre>
<p>It is a bit redundant to provide a textual description for these 3 examples because the code is pretty clear and simple. In this situation you can use the <code class="prettyprint">eg</code> operator to create an example where the description will be the code itself:</p>
<pre><code class="prettyprint">class SeqSpecification extends mutable.Specification {
  &quot;updateLast modifies the last element of a Seq&quot;.p
  eg { Seq(1).updateLast(_ + 1)     must_== Seq(2)     }
  eg { Seq(1, 2).updateLast(_ + 1)  must_== Seq(1, 3)  }
  eg { Seq[Int]().updateLast(_ + 1) must_== Seq[Int]() }
}</code></pre>
<p>This prints:</p>
<pre><code class="prettyprint">[info] updateLast modifies the last element of a Seq
[info]  Seq(1).updateLast(_ + 1)     must_== Seq(2)
[info]  Seq(1, 2).updateLast(_ + 1)  must_== Seq(1, 3)
[info]  Seq[Int]().updateLast(_ + 1) must_== Seq[Int]()</code></pre>
<h4 id="in-an-acceptance-specification">In an acceptance specification</h4>
<p>Acceptance specifications are using interpolated strings so you can directly write:</p>
<pre><code class="prettyprint">class SeqSpecification extends Specification { def is = s2&quot;&quot;&quot;
  updateLast modifies the last element of a Seq
  ${ Seq(1).updateLast(_ + 1)     must_== Seq(2)     }
  ${ Seq(1, 2).updateLast(_ + 1)  must_== Seq(1, 3)  }
  ${ Seq[Int]().updateLast(_ + 1) must_== Seq[Int]() }
&quot;&quot;&quot;
}</code></pre>
<p>There is a huge gotcha though! Each of these expressions needs an implicit conversion to be included in the interpolated spec. And in Scala, if you have a block of code returning a value of type <code class="prettyprint">T</code>, <strong><em>only the last expression of the block is converted</em></strong>. This means that if there is a statement in the block that throws an exception, this exception wonâ€™t be caught and the whole specification will fail to be instantiated! So if you want to use blocks as auto-examples you should better wrap them with an <code class="prettyprint">eg</code> call:</p>
<pre><code class="prettyprint">class SeqSpecification extends Specification { def is = s2&quot;&quot;&quot;
  This is a problematic specification
  ${ sys.error(&quot;ouch, this one is going to blow up the spec&quot;); Seq(1).updateLast(_ + 1) must_== Seq(2) }
  ${ eg { sys.error(&quot;it&#39;s ok, this one is well protected&quot;);    Seq(1).updateLast(_ + 1) must_== Seq(2) } }
&quot;&quot;&quot;
}</code></pre>
</div>

<script>
$(document).ready(function() {
  $('#tipue_search_input').tipuesearch({
    'show': 6
  });
});
</script>
</div>

</body>
</html>