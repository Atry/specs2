<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Scopes</title>
    <link href="./css/opensans-fonts.css"                          type="text/css" rel="stylesheet" />
    <link href="./css/bootstrap.min.css"                           type="text/css" rel="stylesheet" />
    <link href="./css/font-awesome.min.css"                        type="text/css" rel="stylesheet" />
    <link href="./css/prettify.css"                                type="text/css" rel="stylesheet" />
    <link href="./css/tabber.css"                                  type="text/css" rel="stylesheet" />
    <link href="./css/tipuesearch.css"                             type="text/css" rel="stylesheet" />
    <link href="./css/specs2.css"                                  type="text/css" rel="stylesheet" />
    <link href="./css/specs2-user.css"                             type="text/css" rel="stylesheet" />

    <script src="./javascript/jquery.js"                           type="text/javascript"></script>
    <script src="./javascript/jquery.jstree.js"                    type="text/javascript"></script>
    <script src="./javascript/tabber.js"                           type="text/javascript"></script>
    <script src="./javascript/tabber_start.js"                     type="text/javascript"></script>
    <script src="./javascript/prettify.js"                         type="text/javascript"></script>
    <script src="./javascript/specs2.js"                           type="text/javascript"></script>
    <script src="./javascript/specs2-user.js"                      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_set.js"      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_contents.js" type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch.min.js"      type="text/javascript"></script>

</head>
<body onload="prettyPrint()">

<div class="container">

<div class="col-md-2 sidebar-outer">
<div class="col-md-2 fixed">

<!-- search box -->
<div class="search-box">
  <form action="search.html">
    <input type="text" name="q" id="tipue_search_input" autocomplete="off" required>
  </form>
</div>

<!-- table of contents -->
<toc/>

</div>
</div>


<div class="col-md-10">
<h1>Scopes</h1>
<div id="tipue_search_content"></div>

<h3 id="scope">Scope</h3>
<p>The techniques described in <link class="ok"> <a href="org.specs2.guide.ContextObjects.html" tooltip="" class="ok">Context objects</a></link> are not always applicable to unit specifications where we want examples to be a “block” of code described by some text. Instead of creating a case class we can instantiate a trait which will hold a “fresh” state:</p>
<pre><code class="prettyprint">class ContextSpec extends mutable.Specification {
  &quot;this is the first example&quot; in new trees {
    tree.removeNodes(2, 3) must have size(2)
  }
  &quot;this is the first example&quot; in new trees {
    tree.removeNodes(2, 3, 4) must have size(1)
  }
}

/** the `trees` context */
trait trees extends Scope {
  val tree = new Tree(1, 2, 3, 4)
}</code></pre>
<p>Each example of that specification gets a new instance of the <code class="prettyprint">trees</code> trait. So it will have a brand new <code class="prettyprint">tree</code> variable and even if this data is mutated by an example, other examples will be isolated from these changes.</p>
<p>Now you might wonder why the <code class="prettyprint">trees</code> trait is extending the <code class="prettyprint">org.specs2.specification.Scope</code> trait? The reason is that the body of an Example only accepts objects which are convertible to a <code class="prettyprint">Result</code>. By extending <code class="prettyprint">Scope</code> we can take advantage of an implicit conversion provided by the <code class="prettyprint">Specification</code> trait to convert our context object to a <code class="prettyprint">Result</code>.</p>
<h3 id="before-after">Before / After</h3>
<p>It is also possible to extend Scopes with <code class="prettyprint">Before</code> and <code class="prettyprint">After</code> traits but they need to be <code class="prettyprint">org.specs2.mutable.Before</code> and <code class="prettyprint">org.specs2.mutable.After</code> traits. This is necessary because those traits extend the Scala <code class="prettyprint">DelayedInit</code> trait allowing to insert code around the execution of the body of an object.</p>
<h3 id="and-if-you-want-to-know-more" class="ribbon both-ribbon">And if you want to know more</h3>
<div class="ribbon-content">
<ul>
<li>“isolate” examples using the <link class="ok"> <a href="org.specs2.guide.Isolation.html" tooltip="" class="ok"><code class="prettyprint">isolated</code> argument</a></link></li>
<li>print <link class="ok"> <a href="org.specs2.guide.PrintExecutionData.html" tooltip="" class="ok">execution data</a></link></li>
</ul>
</div>
</div>

<script>
$(document).ready(function() {
  $('#tipue_search_input').tipuesearch({
    'show': 6
  });
});
</script>
</div>

</body>
</html>