<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Create online specifications</title>
    <link href="./css/opensans-fonts.css"                          type="text/css" rel="stylesheet" />
    <link href="./css/bootstrap.min.css"                           type="text/css" rel="stylesheet" />
    <link href="./css/font-awesome.min.css"                        type="text/css" rel="stylesheet" />
    <link href="./css/prettify.css"                                type="text/css" rel="stylesheet" />
    <link href="./css/tabber.css"                                  type="text/css" rel="stylesheet" />
    <link href="./css/tipuesearch.css"                             type="text/css" rel="stylesheet" />
    <link href="./css/specs2.css"                                  type="text/css" rel="stylesheet" />
    <link href="./css/specs2-user.css"                             type="text/css" rel="stylesheet" />

    <script src="./javascript/jquery.js"                           type="text/javascript"></script>
    <script src="./javascript/jquery.jstree.js"                    type="text/javascript"></script>
    <script src="./javascript/tabber.js"                           type="text/javascript"></script>
    <script src="./javascript/tabber_start.js"                     type="text/javascript"></script>
    <script src="./javascript/prettify.js"                         type="text/javascript"></script>
    <script src="./javascript/specs2.js"                           type="text/javascript"></script>
    <script src="./javascript/specs2-user.js"                      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_set.js"      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_contents.js" type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch.min.js"      type="text/javascript"></script>

</head>
<body onload="prettyPrint()">

<div class="container">

<div class="col-md-2 sidebar-outer">
<div class="col-md-2 fixed">

<!-- search box -->
<div class="search-box">
  <form action="search.html">
    <input type="text" name="q" id="tipue_search_input" autocomplete="off" required>
  </form>
</div>

<!-- table of contents -->
<toc/>

</div>
</div>


<div class="col-md-10">
<h1>Create online specifications</h1>
<div id="tipue_search_content"></div>

<p>Most of the specifications we write are known up front because this is precisely what guides the construction of our systems. But sometimes data comes first and drives what we can do with the system. For example we want to check that:</p>
<ol style="list-style-type: decimal">
<li>all the Wikipedia pages mentioning the term “BDD” are referencing <s2>specs2</s2></li>
<li>if there is a <s2>specs2</s2> link on the page, the linked page must exist</li>
</ol>
<p>More precisely we want to create one example for <code class="prettyprint">1.</code> and if it succeeds, create as many examples as there are links in <code class="prettyprint">2.</code>. This can be done with the <code class="prettyprint">org.specs2.specification.dsl.Online</code> trait and the <code class="prettyprint">continueWith</code> method:</p>
<pre><code class="prettyprint">class WikipediaBddSpec extends Specification with Online { def is = s2&quot;&quot;&quot;
  All the pages mentioning the term BDD must contain a reference to specs2 $e1
&quot;&quot;&quot;

  def e1 = {
    val pages = Wikipedia.getPages(&quot;BDD&quot;)

    { pages must contain((_:Page) must mention(&quot;specs2&quot;)) } continueWith
      pagesSpec(pages)
  }

  def pagesSpec(pages: Seq[Page]): Fragments = {
    val specs2Links = pages.flatMap(_.getLinks).filter(_.contains(&quot;specs2&quot;))

    s2&quot;&quot;&quot;
     The specs2 links must all be active
     ${ Fragments.foreach(specs2Links)(isActive) }
    &quot;&quot;&quot;
  }

  def isActive(link: HtmlLink) =
    s2&quot;&quot;&quot;
  The page at ${link.getName}
    must be active ${ link must beActive }&quot;&quot;&quot;

  // implement this matcher
  def mention(name: String): Matcher[Page] = ???
  def beActive: Matcher[HtmlLink] = ???</code></pre>
<p>In the specification above, if we succeed in checking each BDD page then we continue with the creation of individual examples for each encountered link.</p>
</div>

<script>
$(document).ready(function() {
  $('#tipue_search_input').tipuesearch({
    'show': 6
  });
});
</script>
</div>

</body>
</html>