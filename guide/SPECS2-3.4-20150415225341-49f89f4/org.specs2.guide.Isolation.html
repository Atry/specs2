<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Isolation</title>
    <link href="./css/opensans-fonts.css"                          type="text/css" rel="stylesheet" />
    <link href="./css/bootstrap.min.css"                           type="text/css" rel="stylesheet" />
    <link href="./css/font-awesome.min.css"                        type="text/css" rel="stylesheet" />
    <link href="./css/prettify.css"                                type="text/css" rel="stylesheet" />
    <link href="./css/tabber.css"                                  type="text/css" rel="stylesheet" />
    <link href="./css/tipuesearch.css"                             type="text/css" rel="stylesheet" />
    <link href="./css/specs2.css"                                  type="text/css" rel="stylesheet" />
    <link href="./css/specs2-user.css"                             type="text/css" rel="stylesheet" />

    <script src="./javascript/jquery.js"                           type="text/javascript"></script>
    <script src="./javascript/jquery.jstree.js"                    type="text/javascript"></script>
    <script src="./javascript/tabber.js"                           type="text/javascript"></script>
    <script src="./javascript/tabber_start.js"                     type="text/javascript"></script>
    <script src="./javascript/prettify.js"                         type="text/javascript"></script>
    <script src="./javascript/specs2.js"                           type="text/javascript"></script>
    <script src="./javascript/specs2-user.js"                      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_set.js"      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_contents.js" type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch.min.js"      type="text/javascript"></script>

</head>
<body onload="prettyPrint()">

<div class="container">

<div class="col-md-2 sidebar-outer">
<div class="col-md-2 fixed">

<!-- search box -->
<div class="search-box">
  <form action="search.html">
    <input type="text" name="q" id="tipue_search_input" autocomplete="off" required>
  </form>
</div>

<!-- table of contents -->
<toc/>

</div>
</div>


<div class="col-md-10">
<h1>Isolation</h1>
<div id="tipue_search_content"></div>

<p>Unit specifications allow to nest blocks, as if they were different contexts, going from the more general to the more specific. It can be very tempting, for some applications, to include some mutable state representing data in more and more specific contexts. However, this can be problematic because:</p>
<ul>
<li>you have to reset the state for each example in a sequential specification</li>
<li>you will have concurrency issues for a concurrent one</li>
</ul>
<p>One way to avoid this is to execute each example in its own instance of the specification.</p>
<h3 id="isolated-variables">Isolated variables</h3>
<p>The <code class="prettyprint">isolated</code> argument duplicates the body of each example so that it is executed in a brand new instance of the Specification:</p>
<pre><code class="prettyprint">class IsolatedSpec extends mutable.Specification {
  isolated

  &quot;Java Properties can store configuration properties&quot; &gt;&gt; {
    // empty properties context
    val props = new Properties
    &quot;we can add a property&quot; &gt;&gt; {
      props.setProperty(&quot;p1&quot;, &quot;v1&quot;)
      props.getProperty(&quot;p1&quot;) must_== &quot;v1&quot;
    }
    &quot;we can get all the properties names&quot; &gt;&gt; {
      props.setProperty(&quot;p1&quot;, &quot;v1&quot;)
      props.setProperty(&quot;p2&quot;, &quot;v2&quot;)
      props.propertyNames.toList must_== List(&quot;p1&quot;, &quot;p2&quot;)
    }
    &quot;Properties can be stored&quot; &gt;&gt; {
      // non-empty properties context
      props.setProperty(&quot;p1&quot;, &quot;v1&quot;)
      props.setProperty(&quot;p2&quot;, &quot;v2&quot;)

      &quot;to an OutputStream&quot; &gt;&gt; {
        val out = new ByteArrayOutputStream
        props.store(out, &quot;to stream&quot;)
        out.size() must be_&gt;(0)
      }
      &quot;to a Writer&quot; &gt;&gt; {
        val out = new ByteArrayOutputStream
        val writer = new PrintWriter(out)
        props.store(writer, &quot;to writer&quot;)
        out.size() must be_&gt;(0)

      }
    }
  }
}</code></pre>
<p>Since there is a new Specification for each example, then all the variables accessible to the example will be seen as new.</p>
<h3 id="instantiation">Instantiation</h3>
<p>If the specification has a constructor with parameters, they need themselves to be instantiable with a no-args constructor. For example <code class="prettyprint">class AkkaSpec(system: AkkaSystem) extends Specification</code> can not be instantiated because <code class="prettyprint">AkkaSystem</code> doesnâ€™t have a 0-args constructor.</p>
</div>

<script>
$(document).ready(function() {
  $('#tipue_search_input').tipuesearch({
    'show': 6
  });
});
</script>
</div>

</body>
</html>