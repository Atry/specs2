<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>For loops</title>
    <link href="./css/opensans-fonts.css"                          type="text/css" rel="stylesheet" />
    <link href="./css/bootstrap.min.css"                           type="text/css" rel="stylesheet" />
    <link href="./css/font-awesome.min.css"                        type="text/css" rel="stylesheet" />
    <link href="./css/prettify.css"                                type="text/css" rel="stylesheet" />
    <link href="./css/tabber.css"                                  type="text/css" rel="stylesheet" />
    <link href="./css/tipuesearch.css"                             type="text/css" rel="stylesheet" />
    <link href="./css/specs2.css"                                  type="text/css" rel="stylesheet" />
    <link href="./css/specs2-user.css"                             type="text/css" rel="stylesheet" />

    <script src="./javascript/jquery.js"                           type="text/javascript"></script>
    <script src="./javascript/jquery.jstree.js"                    type="text/javascript"></script>
    <script src="./javascript/tabber.js"                           type="text/javascript"></script>
    <script src="./javascript/tabber_start.js"                     type="text/javascript"></script>
    <script src="./javascript/prettify.js"                         type="text/javascript"></script>
    <script src="./javascript/specs2.js"                           type="text/javascript"></script>
    <script src="./javascript/specs2-user.js"                      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_set.js"      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_contents.js" type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch.min.js"      type="text/javascript"></script>

</head>
<body onload="prettyPrint()">

<div class="container">

<div class="col-md-2 sidebar-outer">
<div class="col-md-2 fixed">

<!-- search box -->
<div class="search-box">
  <form action="search.html">
    <input type="text" name="q" id="tipue_search_input" autocomplete="off" required>
  </form>
</div>

<!-- table of contents -->
<toc/>

</div>
</div>


<div class="col-md-10">
<h1>For loops</h1>
<div id="tipue_search_content"></div>

<p>It is very tempting to use <code class="prettyprint">foreach</code> to create examples or results from a sequence of values:</p>
<pre><code class="prettyprint">(1 to 3).foreach(i =&gt; &quot;example &quot;+i ! { i must_== i })</code></pre>
<p>The problem with <code class="prettyprint">foreach</code> is that the return value of the expression above is <code class="prettyprint">Unit</code>. So you won’t be able to use it in an acceptance specification or a mutable one.</p>
<h3 id="a-list-of-examples">A list of examples</h3>
<p>When we want to create a list of examples we need to return a <code class="prettyprint">Fragments</code> object. The long-winded way to do so is to use a <code class="prettyprint">foldLeft</code>:</p>
<pre><code class="prettyprint">(1 to 3).foldLeft(Fragments.empty)((res, i) =&gt; res.append(&quot;example &quot;+i ! { i must_== i }))</code></pre>
<p>Or, a bit fancier with Scalaz:</p>
<pre><code class="prettyprint">// Fragments has a Monoid so you can use the foldMap method
  (1 to 3).toList.foldMap(i =&gt; Fragments(&quot;example &quot;+i ! { i must_== i }))</code></pre>
<p>Because this is a recurring pattern there are two methods encapsulating it:</p>
<pre><code class="prettyprint">// when the function only returns a Fragment
  Fragment.foreach(1 to 3)(i =&gt; &quot;example &quot;+i ! { i must_== i }): Fragments

  // when the function returns a Fragments object
  Fragments.foreach(1 to 3) { i =&gt;
    &quot;examples for &quot;+i ^ br^
    &quot;1 + &quot;+i ! { (1 + i) must_== (i + 1) } ^ br^
    &quot;2 + &quot;+i ! { (2 + i) must_== (i + 2) }
  }: Fragments</code></pre>
<p>Now you can create a list of examples inside a “should” block in a mutable specification:</p>
<pre><code class="prettyprint">class MySpec extends mutable.Specification {
  &quot;this block should have lots of examples&quot; &gt;&gt; {
    Fragment.foreach(1 to 1000) { i =&gt;
      &quot;example &quot;+i ! { i must_== i }
    }
  }
}</code></pre>
<h3 id="a-list-of-results">A list of results</h3>
<p>The same situation happens when you want to create a list of expectations inside an example:</p>
<pre><code class="prettyprint">class MySpec extends mutable.Specification {
  &quot;this example has a lot of expectations&quot; &gt;&gt; {
    Result.foreach(1 to 1000) { i =&gt;
      i must_== i
    }
  }
}</code></pre>
<p>In that case the <code class="prettyprint">Result.foreach</code> method is the one to use, it returns a <code class="prettyprint">Result</code> that is the logical <code class="prettyprint">and</code> of all results.</p>
<h3 id="and-if-you-want-to-know-more" class="ribbon both-ribbon">And if you want to know more</h3>
<div class="ribbon-content">
<ul>
<li>read about the <link class="ok"> <a href="org.specs2.guide.FragmentsApi.html" tooltip="" class="ok">Fragments API</a></link></li>
<li>understand why the <code class="prettyprint">Result.foreach</code> method uses the <link class="ok"> <a href="org.specs2.guide.AsResultTypeclass.html" tooltip="" class="ok">AsResult typeclass</a></link></li>
</ul>
</div>
</div>

<script>
$(document).ready(function() {
  $('#tipue_search_input').tipuesearch({
    'show': 6
  });
});
</script>
</div>

</body>
</html>