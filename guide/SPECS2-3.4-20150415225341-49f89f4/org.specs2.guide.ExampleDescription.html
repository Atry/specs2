<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Example description</title>
    <link href="./css/opensans-fonts.css"                          type="text/css" rel="stylesheet" />
    <link href="./css/bootstrap.min.css"                           type="text/css" rel="stylesheet" />
    <link href="./css/font-awesome.min.css"                        type="text/css" rel="stylesheet" />
    <link href="./css/prettify.css"                                type="text/css" rel="stylesheet" />
    <link href="./css/tabber.css"                                  type="text/css" rel="stylesheet" />
    <link href="./css/tipuesearch.css"                             type="text/css" rel="stylesheet" />
    <link href="./css/specs2.css"                                  type="text/css" rel="stylesheet" />
    <link href="./css/specs2-user.css"                             type="text/css" rel="stylesheet" />

    <script src="./javascript/jquery.js"                           type="text/javascript"></script>
    <script src="./javascript/jquery.jstree.js"                    type="text/javascript"></script>
    <script src="./javascript/tabber.js"                           type="text/javascript"></script>
    <script src="./javascript/tabber_start.js"                     type="text/javascript"></script>
    <script src="./javascript/prettify.js"                         type="text/javascript"></script>
    <script src="./javascript/specs2.js"                           type="text/javascript"></script>
    <script src="./javascript/specs2-user.js"                      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_set.js"      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_contents.js" type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch.min.js"      type="text/javascript"></script>

</head>
<body onload="prettyPrint()">

<div class="container">

<div class="col-md-2 sidebar-outer">
<div class="col-md-2 fixed">

<!-- search box -->
<div class="search-box">
  <form action="search.html">
    <input type="text" name="q" id="tipue_search_input" autocomplete="off" required>
  </form>
</div>

<!-- table of contents -->
<toc/>

</div>
</div>


<div class="col-md-10">
<h1>Example description</h1>
<div id="tipue_search_content"></div>

<p><a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself">“Don’t repeat yourself”</a> mandates that the same information is not repeated twice. However this situation happens when part of an example description is reused in the example body:</p>
<pre><code class="prettyprint">s2&quot;&quot;&quot;
  1971-01-01 is a correct date $correct
&quot;&quot;&quot;

  def correct = { &quot;1971-01-01&quot; must beCorrect }</code></pre>
<h3 id="use-the-example-description">Use the example description</h3>
<p>You can avoid this by creating the example body as a function using the description string:</p>
<pre><code class="prettyprint">s2&quot;&quot;&quot;
 1971-01-01 is a correct date $correct
&quot;&quot;&quot;
  def correct = { date: String =&gt;
    date.split(&quot; &quot;)(0) must beCorrect
  }</code></pre>
<h3 id="parse-the-example-description">Parse the example description</h3>
<h4 id="delimited-values">Delimited values</h4>
<p>We can reuse the <code class="prettyprint">StepParsers</code> presented in the <link class="ok"> <a href="org.specs2.guide.GivenWhenThenStyle.html" tooltip="" class="ok">Given/When/Then style</a></link> to extract the values we wish to use:</p>
<pre><code class="prettyprint">s2&quot;&quot;&quot;
 {1971-01-01} is a correct date $correct
 {1} plus {1} is {2}            $addition
&quot;&quot;&quot;

  import org.specs2.specification.script.StepParsers._

  def correct = extract { date: String =&gt;
    date must beCorrect
  }

  def addition = extract { (a: String, b: String, c: String) =&gt;
    a.toInt + b.toInt must_== c.toInt
  }</code></pre>
<p>The values to be extracted are delimited by <code class="prettyprint">{}</code> and those curly braces will not be displayed when the specification is reported.</p>
<h4 id="standard-delimited-parsers">Standard delimited parsers</h4>
<p>When you parse values with <code class="prettyprint">extract</code> you get only Strings which you have to transform into <code class="prettyprint">Int</code> for example. <s2>specs2</s2> comes up with a few predefined parsers to help you with that:</p>
<pre><code class="prettyprint">s2&quot;&quot;&quot;
 {1} plus {1} is {2}            $addition
&quot;&quot;&quot;

  import org.specs2.specification.script.StandardDelimitedStepParsers._

  def addition = threeInts.map { case (a, b, c) =&gt;
    a + b must_== c
  }</code></pre>
<p>The other parsers are:</p>
<table>
<thead>
<tr class="header">
<th align="left">parser</th>
<th align="left">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code class="prettyprint">anInt</code></td>
<td align="left">return a <code class="prettyprint">Int</code></td>
</tr>
<tr class="even">
<td align="left"><code class="prettyprint">twoInts</code></td>
<td align="left">return a pair <code class="prettyprint">(Int, Int)</code></td>
</tr>
<tr class="odd">
<td align="left"><code class="prettyprint">threeInts</code></td>
<td align="left">return a triple <code class="prettyprint">(Int, Int, Int)</code></td>
</tr>
<tr class="even">
<td align="left"><code class="prettyprint">aDouble</code></td>
<td align="left">return a <code class="prettyprint">Double</code></td>
</tr>
<tr class="odd">
<td align="left"><code class="prettyprint">twoDoubles</code></td>
<td align="left">return a pair <code class="prettyprint">(Double, Double)</code></td>
</tr>
<tr class="even">
<td align="left"><code class="prettyprint">threeDoubles</code></td>
<td align="left">return a triple <code class="prettyprint">(Double, Double, Double)</code></td>
</tr>
<tr class="odd">
<td align="left"><code class="prettyprint">aString</code></td>
<td align="left">return a <code class="prettyprint">String</code></td>
</tr>
<tr class="even">
<td align="left"><code class="prettyprint">twoStrings</code></td>
<td align="left">return a pair <code class="prettyprint">(String, String)</code></td>
</tr>
<tr class="odd">
<td align="left"><code class="prettyprint">threeStrings</code></td>
<td align="left">return a triple <code class="prettyprint">(String, String, String)</code></td>
</tr>
</tbody>
</table>
<h4 id="regular-expressions">Regular expressions</h4>
<p>Another way to extract values is to use regular expressions to extract similar groups of values. In that case no delimiters are required. For example:</p>
<pre><code class="prettyprint">s2&quot;&quot;&quot;
 1971-01-01 is a correct date $correct
 1 plus 1 is 2                $addition
&quot;&quot;&quot;

  import org.specs2.specification.script.StepParsers._

  // groupAs is equivalent to running &#39;regexp findAllIn text&#39;
  // and getting one argument per match group found
  def correct = groupAs(&quot;[^ ]+&quot;).and { date: String =&gt;
    date must beCorrect
  }

  def addition = groupAs(&quot;\\d+&quot;).and { (a: String, b: String, c: String) =&gt;
    a.toInt + b.toInt must_== c.toInt
  }</code></pre>
<h4 id="standard-regexp-parsers">Standard regexp parsers</h4>
<p>Similarly to delimited parsers, there are some predefined regexp parsers:</p>
<pre><code class="prettyprint">s2&quot;&quot;&quot;
 1 plus 1 is 2            $addition
&quot;&quot;&quot;

  import org.specs2.specification.script.StandardRegexStepParsers._

  def addition = threeInts.map { case (a, b, c) =&gt;
    a + b must_== c
  }</code></pre>
</div>

<script>
$(document).ready(function() {
  $('#tipue_search_input').tipuesearch({
    'show': 6
  });
});
</script>
</div>

</body>
</html>