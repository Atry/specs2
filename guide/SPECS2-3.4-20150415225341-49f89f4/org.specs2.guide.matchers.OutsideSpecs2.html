<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Outside specs2</title>
    <link href="./css/opensans-fonts.css"                          type="text/css" rel="stylesheet" />
    <link href="./css/bootstrap.min.css"                           type="text/css" rel="stylesheet" />
    <link href="./css/font-awesome.min.css"                        type="text/css" rel="stylesheet" />
    <link href="./css/prettify.css"                                type="text/css" rel="stylesheet" />
    <link href="./css/tabber.css"                                  type="text/css" rel="stylesheet" />
    <link href="./css/tipuesearch.css"                             type="text/css" rel="stylesheet" />
    <link href="./css/specs2.css"                                  type="text/css" rel="stylesheet" />
    <link href="./css/specs2-user.css"                             type="text/css" rel="stylesheet" />

    <script src="./javascript/jquery.js"                           type="text/javascript"></script>
    <script src="./javascript/jquery.jstree.js"                    type="text/javascript"></script>
    <script src="./javascript/tabber.js"                           type="text/javascript"></script>
    <script src="./javascript/tabber_start.js"                     type="text/javascript"></script>
    <script src="./javascript/prettify.js"                         type="text/javascript"></script>
    <script src="./javascript/specs2.js"                           type="text/javascript"></script>
    <script src="./javascript/specs2-user.js"                      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_set.js"      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_contents.js" type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch.min.js"      type="text/javascript"></script>

</head>
<body onload="prettyPrint()">

<div class="container">

<div class="col-md-2 sidebar-outer">
<div class="col-md-2 fixed">

<!-- search box -->
<div class="search-box">
  <form action="search.html">
    <input type="text" name="q" id="tipue_search_input" autocomplete="off" required>
  </form>
</div>

<!-- table of contents -->
<toc/>

</div>
</div>


<div class="col-md-10">
<h1>Outside specs2</h1>
<div id="tipue_search_content"></div>

<p>The <s2>specs2</s2> matchers are a well-delimited piece of functionality that you should be able to reuse in your own test framework. You can reuse the following traits:</p>
<ul>
<li><p><code class="prettyprint">org.specs2.matcher.MustMatchers</code> (or <code class="prettyprint">org.specs2.matcher.ShouldMatchers</code>) to write anything like <code class="prettyprint">1 must be_==(1)</code> and get a <code class="prettyprint">Result</code> back</p></li>
<li><p><strong>Important</strong>: the <code class="prettyprint">MustMatchers</code> <em>trait</em> will fill-in stacktraces on <code class="prettyprint">MatchResults</code> to mark the location of a result while the <code class="prettyprint">MustMatchers</code> object will not. This has some important consequences in terms of performances because creating stack traces is expensive</p></li>
<li><p>You can also use the side-effecting version of that trait called <code class="prettyprint">org.specs2.matcher.MustThrownMatchers</code> (or <code class="prettyprint">org.specs2.matcher.ShouldThrownMatchers</code>). It throws a <code class="prettyprint">FailureException</code> as soon as an expectation is failing</p></li>
<li><p>Finally, in a JUnit-like library you can use the <code class="prettyprint">org.specs2.matcher.JUnitMustMatchers</code> trait which throws <code class="prettyprint">AssertionFailureError</code>s</p></li>
</ul>
<h4 id="without-any-dependency-on-specs2">Without any dependency on specs2</h4>
<p>It is possible to add testing features to your library without depending on a specific testing library, like <s2>specs2</s2> or ScalaTest. You will let clients of your library decide which one they want with the following trait:</p>
<pre><code class="prettyprint">trait TestInterface {
  def fail(msg: String): Nothing
  def skip(msg: String): Nothing
}
// and use the trait in your library
trait TestKit extends TestInterface {
  def runTest(call: =&gt;Unit) = {
    // run the code and if there is an error
    fail(&quot;error!&quot;)
  }
}</code></pre>
<p>When there is a failure or an error the library will call the <code class="prettyprint">TestKit</code> methods. Then the library client can use both the library and <s2>specs2</s2> by mixing in the <code class="prettyprint">org.specs2.matcher.ThrownMessages</code> trait:</p>
<pre><code class="prettyprint">trait ThrownMessages { this: ThrownExpectations =&gt;
  def fail(m: String): Nothing = failure(m)
  def skip(m: String): Nothing = skipped(m)
}

class MySpec extends Specification with TestKit with ThrownMessages { def is = s2&quot;&quot;&quot;
  An example using the TestKit $e1
&quot;&quot;&quot;
  def e1 = {
    // do something with the library
    runTest(...)
  }
}</code></pre>
</div>

<script>
$(document).ready(function() {
  $('#tipue_search_input').tipuesearch({
    'show': 6
  });
});
</script>
</div>

</body>
</html>