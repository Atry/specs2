<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Selection</title>
    <link href="./css/opensans-fonts.css"                          type="text/css" rel="stylesheet" />
    <link href="./css/bootstrap.min.css"                           type="text/css" rel="stylesheet" />
    <link href="./css/font-awesome.min.css"                        type="text/css" rel="stylesheet" />
    <link href="./css/prettify.css"                                type="text/css" rel="stylesheet" />
    <link href="./css/tabber.css"                                  type="text/css" rel="stylesheet" />
    <link href="./css/tipuesearch.css"                             type="text/css" rel="stylesheet" />
    <link href="./css/specs2.css"                                  type="text/css" rel="stylesheet" />
    <link href="./css/specs2-user.css"                             type="text/css" rel="stylesheet" />

    <script src="./javascript/jquery.js"                           type="text/javascript"></script>
    <script src="./javascript/jquery.jstree.js"                    type="text/javascript"></script>
    <script src="./javascript/tabber.js"                           type="text/javascript"></script>
    <script src="./javascript/tabber_start.js"                     type="text/javascript"></script>
    <script src="./javascript/prettify.js"                         type="text/javascript"></script>
    <script src="./javascript/specs2.js"                           type="text/javascript"></script>
    <script src="./javascript/specs2-user.js"                      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_set.js"      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_contents.js" type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch.min.js"      type="text/javascript"></script>

</head>
<body onload="prettyPrint()">

<div class="container">

<div class="col-md-2 sidebar-outer">
<div class="col-md-2 fixed">

<!-- search box -->
<div class="search-box">
  <form action="search.html">
    <input type="text" name="q" id="tipue_search_input" autocomplete="off" required>
  </form>
</div>

<!-- table of contents -->
<toc/>

</div>
</div>


<div class="col-md-10">
<h1>Selection</h1>
<div id="tipue_search_content"></div>

<p>Many specifications are written incrementally. You specify a little bit then you implement the application. When you go through this “Specify-Implement-Execute” cycle it is useful to be able to focus on just one example, the one you are currently working on. The <code class="prettyprint">ex</code> argument is what you need (<code class="prettyprint">ex</code> stands for “example”):</p>
<pre><code class="prettyprint">sbt&gt; test-only *MySpecification* -- ex contains</code></pre>
<p>The command above will execute any example which description matches the regular expression <code class="prettyprint">.*contains.*</code> (which means that you can pass regular expressions in general). If you want to match a few words you will need to use double quotes:</p>
<pre><code class="prettyprint">sbt&gt; test-only *MySpecification* -- ex &quot;contains hello&quot; sequential</code></pre>
<h3 id="use-tags">Use tags</h3>
<p>Tags can be used in a Specification to include or exclude some examples or a complete section of fragments from the execution. Let’s have a look at one example:</p>
<pre><code class="prettyprint">class TaggedSpecification extends Specification { def is = s2&quot;&quot;&quot;
 this is some introductory text
  and the first group of examples
  example 1 $success                         ${tag(&quot;feature1&quot;, &quot;unit&quot;)}
  example 2 $success                         ${tag(&quot;integration&quot;)}

  and the second group of examples           ${section(&quot;checkin&quot;)}
  example 3 $success
  example 4 $success                         ${section(&quot;checkin&quot;)}
                                             &quot;&quot;&quot;
  }</code></pre>
<p>In that specification we are defining several tags and sections:</p>
<ul>
<li><code class="prettyprint">feature 1</code> is a tag that is applied to <code class="prettyprint">example1</code> (the <em>preceding</em> Fragment)</li>
<li><code class="prettyprint">feature 2</code> is a tag that is applied to <code class="prettyprint">example2</code> (the <em>preceding</em> Fragment)</li>
<li><code class="prettyprint">checkin</code> marks a section which goes from the Text <code class="prettyprint">and the second group of examples</code> to <code class="prettyprint">example 4</code></li>
</ul>
<p>Armed with this, it is now easy to include or exclude portions of the specification at execution time:</p>
<ul>
<li><code class="prettyprint">include feature1</code> will only include <code class="prettyprint">example 1</code></li>
<li><code class="prettyprint">exclude integration</code> will include everything except <code class="prettyprint">example 2</code></li>
<li><code class="prettyprint">include checkin,unit</code> will include anything having either <code class="prettyprint">checkin</code> OR <code class="prettyprint">unit</code>: i.e. <code class="prettyprint">example 1</code> and the second group of examples (<code class="prettyprint">example 3</code> and <code class="prettyprint">example 4</code>)</li>
<li><code class="prettyprint">include feature1 &amp;&amp; unit</code> will include anything having <code class="prettyprint">feature1</code> AND <code class="prettyprint">unit</code>: i.e. <code class="prettyprint">example 1</code></li>
<li><code class="prettyprint">include feature1 &amp;&amp; unit, checkin</code> will include anything having <code class="prettyprint">feature1</code> AND <code class="prettyprint">unit</code>, OR having <code class="prettyprint">checkin</code>: i.e. <code class="prettyprint">example 1</code>, <code class="prettyprint">example 3</code>, <code class="prettyprint">example4</code></li>
</ul>
<h4 id="in-a-unit-specification">In a unit specification</h4>
<p>A <em>unit</em> specification will accept the same <code class="prettyprint">tag</code> and <code class="prettyprint">section</code> methods but the behavior will be slightly different:</p>
<pre><code class="prettyprint">import org.specs2.mutable._

class TaggedSpecification extends Specification {
  &quot;this is some introductory text&quot; &gt;&gt; {
    &quot;and the first group of examples&quot; &gt;&gt; {
      tag(&quot;feature 1&quot;, &quot;unit&quot;)
      &quot;example 1&quot; in success
      &quot;example 2&quot; in success
    }
  }
  section(&quot;checkin&quot;)
  &quot;and the second group of examples&quot; &gt;&gt; {
    &quot;example 3&quot; in success
    &quot;example 4&quot; in success
  }
  section(&quot;checkin&quot;)

  &quot;and the last group of examples&quot; &gt;&gt; {
    &quot;example 5&quot; in success
    &quot;example 6&quot; in success
  }
}</code></pre>
<p>For that specification above:</p>
<ul>
<li><p>when the <code class="prettyprint">tag</code> call is inserted on a new line, the tagged fragment is the one just <em>after</em> the tag method call: <code class="prettyprint">example 1</code> is tagged with <code class="prettyprint">feature1 and unit</code>,</p></li>
<li><p>when the <code class="prettyprint">tag</code> is appended to an example, it applies to that example: <code class="prettyprint">example 2</code> is tagged with <code class="prettyprint">integration</code></p></li>
<li><p>when the <code class="prettyprint">section</code> call is inserted on a new line, this opens a section for all the following fragments. This should be closed by a corresponding <code class="prettyprint">section</code> call on a new line. For example, <code class="prettyprint">example 3</code> and <code class="prettyprint">example 4</code> are part of the “checkin” section</p></li>
<li><p>when the <code class="prettyprint">section</code> call is appended to a block of Fragments on the same line, all the fragments of that block are part of the section: <code class="prettyprint">example 5</code> and <code class="prettyprint">example 6</code> are tagged with <code class="prettyprint">slow</code></p></li>
</ul>
<h4 id="always-tag"><code class="prettyprint">Always</code> tag</h4>
<p>Some specifications need to have <code class="prettyprint">Steps</code> which will always be included whatever tags are specified on the command line. This is the case when defining a <link class="ok"> <a href="org.specs2.guide.SpecificationTemplate.html" tooltip="" class="ok">“template” specification</a></link> with setup/teardown steps:</p>
<pre><code class="prettyprint">trait DatabaseSpec extends Specification {
  override def map(fs: =&gt;Fragments) =
    step(&quot;startDb&quot;) ^ tag(AlwaysTag) ^
    fs ^
    step(&quot;cleanDb&quot;) ^ tag(AlwaysTag)
}</code></pre>
<h3 id="select-failed-examples">Select failed examples</h3>
<p>Another frequent mode of selection is the selection based on previous execution. Generally we want to re-execute only what was broken before. For this, using the <code class="prettyprint">was</code> argument on the command-line:</p>
<pre><code class="prettyprint">sbt&gt; test-only *MyFailedSpecification* -- was x</code></pre>
<p>On the line above <code class="prettyprint">x</code> is the status of the previous example. Here is a table of all the flags you can use:</p>
<table>
<thead>
<tr class="header">
<th align="left">Flag</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code class="prettyprint">+</code></td>
<td align="left">successful example</td>
</tr>
<tr class="even">
<td align="left"><code class="prettyprint">x</code></td>
<td align="left">failed example</td>
</tr>
<tr class="odd">
<td align="left"><code class="prettyprint">!</code></td>
<td align="left">error example</td>
</tr>
<tr class="even">
<td align="left"><code class="prettyprint">o</code></td>
<td align="left">skipped example</td>
</tr>
<tr class="odd">
<td align="left"><code class="prettyprint">*</code></td>
<td align="left">pending example</td>
</tr>
<tr class="even">
<td align="left"><code class="prettyprint">-</code></td>
<td align="left">text</td>
</tr>
<tr class="odd">
<td align="left"><code class="prettyprint">1</code></td>
<td align="left">statistics</td>
</tr>
</tbody>
</table>
<p>This selection works because <s2>specs2</s2> stores the state of each specification in a directory after a run (<code class="prettyprint">target/specs2-reports/stats</code> by default). If you decide that this storing is useless and you want to skip it you can use the <code class="prettyprint">neverstore</code> argument. Otherwise if you want to make sure that the <code class="prettyprint">stats</code> directory doesn’t become too big over time you can use the <code class="prettyprint">resetstore</code> argument which will remove the current store before running the specification.</p>
<h3 id="and-if-you-want-to-know-more" class="ribbon both-ribbon">And if you want to know more</h3>
<div class="ribbon-content">
<ul>
<li>learn how to <link class="ok"> <a href="org.specs2.guide.ConsoleOutput.html" tooltip="" class="ok">display only some examples</a></link></li>
<li>consult the <link class="ok"> <a href="org.specs2.guide.ArgumentsReference.html" tooltip="" class="ok">arguments reference guide</a></link> for a list of all arguments</li>
</ul>
</div>
</div>

<script>
$(document).ready(function() {
  $('#tipue_search_input').tipuesearch({
    'show': 6
  });
});
</script>
</div>

</body>
</html>